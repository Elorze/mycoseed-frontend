<template>
  <div class="space-y-8">
    <!-- ç¤¾åŒºå¹¿åœºæ ‡é¢˜ -->
    <div class="text-center mb-6">
      <h1 class="font-pixel text-2xl md:text-4xl text-black mb-2">ç¤¾åŒºå¹¿åœº</h1>
      <div class="w-24 md:w-32 h-1 bg-black mx-auto"></div>
    </div>

    <!-- å—å¡˜ç¤¾åŒºå¡ç‰‡ -->
    <PixelCard>
      <div class="space-y-6">
        <!-- ç¤¾åŒºæ ‡é¢˜å’Œä¸‹æ‹‰æ¡† -->
        <div class="flex items-center justify-between border-b-2 border-black pb-4">
          <h2 class="font-pixel text-lg uppercase text-black">å—å¡˜</h2>
          <button
            @click="showIntro = !showIntro"
            class="px-4 py-2 bg-white border-2 border-black shadow-pixel-sm font-vt323 text-sm transition-all hover:shadow-pixel hover:-translate-y-1"
          >
            {{ showIntro ? 'æ”¶èµ·' : 'å±•å¼€' }}
          </button>
        </div>

        <!-- ç¤¾åŒºä»‹ç»ï¼ˆå¯å±•å¼€/æ”¶èµ·ï¼‰ -->
        <div v-if="showIntro" class="prose font-vt323 text-lg max-w-none p-4 bg-gray-50 border-2 border-black">
          <div class="whitespace-pre-wrap">{{ nantangIntro }}</div>
        </div>

        <!-- ç¤¾åŒºä¿¡æ¯ï¼ˆæ•°æ®æ¸…ç©ºï¼‰ -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- å¸‚æ”¿å… -->
          <PixelCard>
            <template #header>å¸‚æ”¿å… (TOWN HALL)</template>
            <div class="space-y-4 text-center">
              <div class="w-full h-24 bg-gray-100 flex items-center justify-center border-2 border-dashed border-black/20 relative overflow-hidden">
                <div class="absolute inset-0 flex items-center justify-center text-6xl opacity-20">ğŸ°</div>
              </div>
              
              <!-- ç¤¾åŒºç»Ÿè®¡ï¼ˆæ•°æ®æ¸…ç©ºï¼‰ -->
              <div class="grid grid-cols-2 gap-2 text-left font-vt323 text-lg bg-gray-50 p-2 border border-black/10">
                <div>å—å¡˜è±†:</div>
                <div class="text-right text-mario-coin font-bold">0</div>
                <div>æˆå‘˜:</div>
                <div class="text-right font-bold">0</div>
              </div>

              <p class="text-sm text-gray-600 text-left">
                ç´ èˆæä¾›ä¹¡æ‘æ‘æ°‘å®¿é¤é¥®ï¼Œä½“éªŒä¹¡æ‘ç”Ÿæ´»ï¼Œæ„Ÿå—è‡ªç„¶ä¹‹ç¾ã€‚
              </p>
            </div>
          </PixelCard>

          <!-- æ‘æ°‘ï¼ˆæ•°æ®æ¸…ç©ºï¼‰ -->
          <PixelCard>
            <template #header>æ‘æ°‘ (VILLAGERS)</template>
            <div class="text-center py-8 text-gray-400 font-vt323">
              æš‚æ— æˆå‘˜
            </div>
          </PixelCard>
        </div>
      </div>
    </PixelCard>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import PixelCard from '~/components/pixel/PixelCard.vue'
import { useUserStore } from '~/stores/user'

// Use definePageMeta to ensure layout is applied
definePageMeta({
  layout: 'default',
  middleware: 'auth'
})

const userStore = useUserStore()

// æ§åˆ¶å±•å¼€/æ”¶èµ·
const showIntro = ref(false)

// å—å¡˜ç¤¾åŒºä»‹ç»æ–‡å­—
const nantangIntro = `# å—å¡˜

æ¬¢è¿æ¥åˆ°å—å¡˜ï¼Œç´ èˆæä¾›ä¹¡æ‘æ‘æ°‘å®¿é¤é¥®æœåŠ¡ã€‚

## æˆ‘ä»¬çš„ç‰¹è‰²
- ä¹¡æ‘æ°‘å®¿ä½“éªŒ
- åœ°é“ä¹¡æ‘é¤é¥®
- è‡ªç„¶ç”Ÿæ€ä½“éªŒ
- å—å¡˜è±†ç§¯åˆ†å¥–åŠ±

## æœåŠ¡å†…å®¹
- æ°‘å®¿ä½å®¿æœåŠ¡
- ä¹¡æ‘ç‰¹è‰²é¤é¥®
- å†œäº‹ä½“éªŒæ´»åŠ¨
- ä¹¡æ‘æ–‡åŒ–ä½“éªŒ
`
</script>

<style scoped>
.prose {
  color: #000;
}

.prose h1 {
  font-family: 'Press Start 2P', cursive;
  font-size: 1.5rem;
  margin-bottom: 1rem;
  text-transform: uppercase;
}

.prose h2 {
  font-family: 'Press Start 2P', cursive;
  font-size: 1rem;
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  text-transform: uppercase;
}

.prose ul {
  list-style: none;
  padding-left: 0;
  margin-top: 0.75rem;
  margin-bottom: 0.75rem;
}

.prose li {
  padding-left: 1.5rem;
  position: relative;
  margin-bottom: 0.5rem;
}

.prose li::before {
  content: 'â€¢';
  position: absolute;
  left: 0;
  font-weight: bold;
}
</style>